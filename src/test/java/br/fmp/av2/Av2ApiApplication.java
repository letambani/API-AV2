package br.fmp.av2; import br.fmp.av2.model.UserAccount; import br.fmp.av2.repository.UserAccountRepository; import org.springframework.boot.CommandLineRunner; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.context.annotation.Bean; import org.springframework.security.crypto.password.PasswordEncoder; @SpringBootApplication public class Av2ApiApplication { public static void main(String[] args) { SpringApplication.run(Av2ApiApplication.class, args); } @Bean CommandLineRunner seed(UserAccountRepository users, PasswordEncoder encoder) { return args -> { String email = "admin@fmp.br"; String raw = "123456"; users.findByEmail(email).orElseGet(() -> { UserAccount u = new UserAccount(email, encoder.encode(raw), "ROLE_ADMIN"); return users.save(u); }); }; } } 