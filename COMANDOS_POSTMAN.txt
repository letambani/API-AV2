========================================== COMANDOS E CONFIGURAÇÕES POSTMAN - AV2 ========================================== PASSO 1: IMPORTAR COLEÇÃO ----------------------------- 1. Abra o Postman 2. Clique em "Import" (canto superior esquerdo) 3. Selecione: av2-api/Postman_Collection_AV2.json 4. Clique em "Import" Coleção "AV2-SpringBoot" será criada automaticamente PASSO 2: CRIAR ENVIRONMENT (OPCIONAL) ----------------------------------------- 1. Clique no ícone de Environments ( canto superior direito) 2. Clique em "+" para criar novo 3. Nome: AV2-Local 4. Adicione variável: Variable: jwt Initial Value: (vazio) Current Value: (vazio) 5. Clique em "Save" 6. Selecione "AV2-Local" no dropdown PASSO 3: EXECUTAR REQUESTS ------------------------------- IMPORTANTE: Execute "Login" PRIMEIRO! 1. LOGIN (POST /auth/login) - Abra a coleção "AV2-SpringBoot" - Clique em "Login" - Clique em "Send" - Token será salvo automaticamente 2. GET /aluno (Listar) - Headers: Authorization: Bearer {{jwt}} - Clique em "Send" - Deve retornar 200 OK 3. GET /aluno (Sem Token) - NÃO adicione header Authorization - Clique em "Send" - Deve retornar 401 Unauthorized 4. POST /aluno (Criar) - Headers: Authorization: Bearer {{jwt}} - Body (raw JSON): { "nome": "Novo Aluno", "idade": 20, "cpf": "11122233344" } - Clique em "Send" - Deve retornar 201 Created 5. POST /aluno (CPF Duplicado) - Use o mesmo CPF do passo 4 - Deve retornar 409 Conflict 6. GET /aluno/999 - Headers: Authorization: Bearer {{jwt}} - Deve retornar 404 Not Found 7. POST /auth/login (Credenciais Erradas) - Body: {"email":"admin@fmp.br","senha":"senhaerrada"} - Deve retornar 401 Unauthorized CONFIGURAÇÃO MANUAL DE CADA REQUEST -------------------------------------- REQUEST 1: Login ---------------- Método: POST URL: http://localhost:8081/auth/login Headers: Content-Type: application/json Body (raw JSON): { "email": "admin@fmp.br", "senha": "123456" } Scripts (Tests tab): if (pm.response.code === 200) { var jsonData = pm.response.json(); pm.environment.set('jwt', jsonData.token); console.log('Token salvo:', jsonData.token); } REQUEST 2: GET /aluno (Com Token) ---------------------------------- Método: GET URL: http://localhost:8081/aluno Headers: Authorization: Bearer {{jwt}} REQUEST 3: GET /aluno (Sem Token) ---------------------------------- Método: GET URL: http://localhost:8081/aluno Headers: (nenhum) REQUEST 4: POST /aluno (Criar) ------------------------------- Método: POST URL: http://localhost:8081/aluno Headers: Authorization: Bearer {{jwt}} Content-Type: application/json Body (raw JSON): { "nome": "Novo Aluno", "idade": 20, "cpf": "11122233344" } REQUEST 5: POST /aluno (CPF Duplicado) --------------------------------------- Método: POST URL: http://localhost:8081/aluno Headers: Authorization: Bearer {{jwt}} Content-Type: application/json Body (raw JSON): { "nome": "Outro Aluno", "idade": 25, "cpf": "11122233344" } REQUEST 6: GET /aluno/999 (404) -------------------------------- Método: GET URL: http://localhost:8081/aluno/999 Headers: Authorization: Bearer {{jwt}} REQUEST 7: POST /auth/login (Credenciais Erradas) --------------------------------------------------- Método: POST URL: http://localhost:8081/auth/login Headers: Content-Type: application/json Body (raw JSON): { "email": "admin@fmp.br", "senha": "senhaerrada" } REQUEST 8: CORS Test (OPTIONS) ------------------------------- Método: OPTIONS URL: http://localhost:8081/aluno Headers: Origin: http://localhost:3000 Access-Control-Request-Method: GET Access-Control-Request-Headers: Authorization CREDENCIAIS -------------- Email: admin@fmp.br Senha: 123456 STATUS ESPERADOS -------------------- 1. POST /auth/login → 200 OK 2. GET /aluno (com token) → 200 OK 3. GET /aluno (sem token) → 401 Unauthorized 4. POST /aluno (criar) → 201 Created 5. POST /aluno (CPF duplicado) → 409 Conflict 6. GET /aluno/999 → 404 Not Found 7. POST /auth/login (credenciais erradas) → 401 Unauthorized 8. OPTIONS /aluno (CORS) → 200/204 OK PRONTO! ----------- A coleção já está configurada. Basta importar e executar! 