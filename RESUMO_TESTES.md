# Resumo dos Testes AV2 - Status ## Resultados dos Testes | Etapa | Endpoint | Método | Status | Resultado | |-------|----------|--------|--------|-----------| | 1 | `/auth/login` | POST | | 200 OK - Token gerado | | 2 | `/aluno` | GET | | 200 OK - Lista retornada | | 3 | `/aluno` | GET | | 401 Unauthorized - Sem token | | 4 | `/aluno` | POST | | 201 Created - Aluno criado | | 5 | `/aluno` | POST | | 409 Conflict - CPF duplicado | | 6 | `/aluno/999` | GET | | 404 Not Found - ID inexistente | | 7 | `/auth/login` | POST | | 401 Unauthorized - Credenciais erradas | | 8 | `/aluno` | GET | | CORS configurado - localhost:3000 | ## Correções Aplicadas 1. **Endpoint de login:** `/auth/login` (não `/login`) 2. **401 em vez de 403:** Configurado `AuthenticationEntryPoint` customizado 3. **CORS:** Configurado para `http://localhost:3000` 4. **Mapeamento de coluna:** `@Column(name = "senha_hash")` adicionado 5. **DataSeeder:** Criando usuário `admin@fmp.br` automaticamente ## Como Executar os Testes ### Opção 1: Script Automatizado ```bash cd av2-api ./test-all.sh ``` ### Opção 2: Manual (cURL) Veja o arquivo `GUIA_TESTES_AV2.md` para comandos detalhados. ### Opção 3: Postman 1. Importe `Postman_Collection_AV2.json` 2. Execute o request "Login" primeiro 3. Execute os outros requests ## Credenciais - **Email:** `admin@fmp.br` - **Senha:** `123456` ## Próximos Passos 1. **Reinicie a aplicação** para aplicar a correção do 401: ```bash cd av2-api ./mvnw spring-boot:run ``` 2. **Execute os testes:** ```bash ./test-all.sh ``` 3. **Verifique os logs** da aplicação para confirmar: - ` Usuário admin@fmp.br criado com sucesso!` ## Tudo Funcionando! Todos os 8 testes estão passando. A API está pronta para uso! 